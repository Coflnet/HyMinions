extends ../layouts/default

block append js
    script(src="/js/jquery/jquery.doubleScroll.js")
    //- script(src="/js/minionsData.js")
    //- script(src="/js/minionsOperation.js")
    script(src="/js/minions.js")
    	
block append variables
    - var currentPage = "minions";

block meta
    meta(name="description" content="Know your most profitable minions! Tailor made for each profile, highly accurate.")

mixin infoBox(id,type,title)
    if(type=="info")
        i.fas.fa-lg(data-toggle="modal" data-target="#"+id class="fa-info-circle")
    else if(type=="question")
        i.fas.fa-lg(data-toggle="modal" data-target="#"+id class="fa-question-circle")
    .modal.fade.infoBox(id=id tabindex="-1" role="dialog" aria-labelledby=id+"Label" aria-hidden="true")
        .modal-dialog(role="document" class=(type=="rightInfo"?"modal-xl":undefined))
            .modal-content
                .modal-header
                    h3.modal-title(id=id+"Label")=title
                    button.close(type="button" data-dismiss="modal" aria-label="Close")
                        span(aria-hidden="true") &times;
                .modal-body
                    if block 
                        block 
                    else
                        p Nothing to see here
                .modal-footer
                    button.btn.btn-secondary(type="button" data-dismiss="modal") Close

block content
    .container
        h1.d-inline-block MINIONS &nbsp;
        img.d-inline-block.align-top(src="/images/minions.png" width="40" height="40")
        p.d-inline-block &nbsp; &nbsp; &nbsp;
        +infoBox("minionsTitleModal","info","Minions Profit Calculator")
            p It calculates the profit generated by each minion.
            p What's so special is that it allows you to fully personalize its elements to become your own minion tier list based on your profile, which include minion tiers, form of products (even in e-block form!), whether or not diamond spreadings are equipped, and more.
            p It also calculates the profit based on bazaar prices directly obtained from the Hypixel API, so the prices are up-to-date.
            //- br
            //- p To use it, go to the <a href="/minions">minions tab</a>. Type in your Minecraft IGN in the first input box (or simply leave it if you have fully maxed minions), and click "Apply Overall Changes". You will then see a list of all minions, ranked by the amount of profit it generates. The number below each minion is the profit per hour, assuming you sell the items to the bazaar. You can also see the item(s) each minion gives.
            //- p The default settings should be fine for most of you. Of course you can try out different settings based on your own playstyle.
            br
            h4 Disclaimer
            p As more people are using my website, I would like to explain more about how the minion profit calculator works and its limitations.
            p Please note that the minion profit calculator calculates based on the instantaneous price of the items sold at bazaar, so the prices may fluctuate a lot from time to time, and so do the minions profit (as we all know the economy of Skyblock is quite unstable). The "best minion" for money may not be the same some time later. I hope you all understand this uncertainty.
            p Overall speaking, snow minions and clay minions are the most stable for profit as their profits do not depend on the economy. If you would like to explore other relatively stable alternatives you may watch <a href="https://youtu.be/_LmqqJtsdrk"> ModernSoldier's video</a> for more advice.
        p Profit Calculator - Find the best minions to place down while you are offline!
        #overall
            .row
                #general.col-lg-6.col-12
                    br
                    h3 Tier Selection
                    .form-check
                        input#overallUseProfile.form-check-input.radio(type="radio" name="tierTypeRadios" value=1 checked=(settings.tierType==1 ? "checked":undefined)) 
                        label(for="overallUseProfile") Use Profile  &nbsp; 
                        +infoBox("profileModal","question","Why is my Minecraft name required?")
                            p If you enter your Minecraft name, it will calculate the profit based on the highest tier of the minion you have crafted. It could make the profit list more personalized and useful when finding the most profitable minions among those you have.
                            p Alternatively, you could uncheck this "Use Profile" box, and select the tier of the minions manually.
                        .form-group#useProfile
                            p Minecraft Name: &nbsp; 
                                input#overallProfileName.form-control(value=settings.name oninput="selectTierTypeRadios(1)")
                            if(settings.profileNames)
                                label(for="overallProfileProfile") Profile: &nbsp;
                                select#overallProfileProfile.form-control
                                    -let k=0
                                    while k<settings.profileNames.length
                                        option(value=k selected=(settings.profile==k?'selected':undefined))=settings.profileNames[k]
                                        -k++;
                    .form-check
                        input#overallUseSlots.form-check-input.radio(type="radio" name="tierTypeRadios" value=2 checked=(settings.tierType==2 ? "checked":undefined)) 
                        label(for="overallUseSlots") Estimate by number of minion slots:  &nbsp; 
                        +infoBox("slotsModal","question","Estimate by number of minion slots")
                            p We could estimate the tier of the minions you have based on the number of minion slots you have, assuming you craft the minions in ascending order of costs. 
                            p Please note that it is just an ESTIMATE of the minions you have, the minions you have could be quite different because you might not be buying them in order, and the cost of the minions depends on the market price of materials.
                            p If you want the profits calculator to be more accurate, you are advised to enter your Minecraft name so that it can obtain the exact minions you have. 
                        .form-group
                            .form-check
                                input#slots10.form-check-input.radio(type="radio" name="slotsRadios" value=10 onchange="selectTierTypeRadios(2)" checked=(settings.slots==10 ? "checked":undefined)) 
                                label(for="slots10") 10 slots
                            .form-check
                                input#slots15.form-check-input.radio(type="radio" name="slotsRadios" value=15 onchange="selectTierTypeRadios(2)" checked=(settings.slots==15 ? "checked":undefined)) 
                                label(for="slots15") 15 slots
                            .form-check
                                input#slots20.form-check-input.radio(type="radio" name="slotsRadios" value=20 onchange="selectTierTypeRadios(2)" checked=(settings.slots==20 ? "checked":undefined)) 
                                label(for="slots20") 20 slots
                            .form-check
                                input#slots23.form-check-input.radio(type="radio" name="slotsRadios" value=23 onchange="selectTierTypeRadios(2)" checked=(!settings.slots||settings.slots==23 ? "checked":undefined)) 
                                label(for="slots23") 23 slots
                            .form-check
                                input#slotsOthers.form-check-input.radio(type="radio" name="slotsRadios" value="others" onchange="selectTierTypeRadios(2)" checked=(settings.slots&&settings.slots!=10&&settings.slots!=15&&settings.slots!=20&&settings.slots!=23 ? "checked":undefined)) 
                                label(for="slotsOthers") Others: &nbsp;
                                input#slotsOthersInput.form-control(type="number" value=settings.slots min="5")
                                span &nbsp; slots
                    .form-check
                        input#overallUseTier.form-check-input.radio(type="radio" name="tierTypeRadios" value=0 checked=(settings.tierType==0 ? "checked":undefined)) 
                        label(for="overallUseTier") Manually select Tier: &nbsp;
                            select#overallTier.form-control(onchange="selectTierTypeRadios(0)")
                                -let j=1
                                while j<=10
                                    option(selected=(settings.tier==j ? 'selected':undefined))=j
                                    -j++;
                                //- 11: default
                                option(selected=(!settings.tier||settings.tier==11 ? 'selected':undefined) value="11") 11
                                option(selected=(settings.tier==12 ? 'selected':undefined) value="12") 11/12
                    
                    br
                    h3 General
                    .form-group
                        p Fuel/ other perks: &nbsp; 
                            input#overallFuel.form-control(type="number" value=settings.fuel min="0")
                            span &nbsp; %

                    #autoCalculationType(class=(settings.calculationType==1 ? "":"d-none"))
                        .form-group
                            p Offline time: &nbsp; 
                                input#overallOfflineTime.form-control(type="number" value=settings.offlineTimeUnit==1?settings.offlineTime/24:settings.offlineTime min="0")
                                span &nbsp;
                                select#overallOfflineTimeUnit.form-control
                                    option(value="0" selected=(settings.offlineTimeUnit==0?'selected':undefined)) hour(s)
                                    option(value="1" selected=(settings.offlineTimeUnit==1?'selected':undefined)) day(s)
                        small.pl-3 ^If you are not sure about your offline time, you could leave it as 1 day.
                        br
                .col-lg-6.col-12  
                    #advanced
                        br
                        h3 Advanced
                        #manualCalculationType(class=(settings.calculationType==0 ? "":"d-none"))
                            .form-group
                                label(for="overallProductForm") Products form: &nbsp;
                                select#overallProductForm.form-control
                                    option(value="-2" selected=(settings.productForm==-2?'selected':undefined)) Max profit (enchanted forms)
                                    option(value="-1" selected=(settings.productForm==-1?'selected':undefined)) Max profit
                                    option(value="0" selected=(settings.productForm==0?'selected':undefined)) Unenchanted form
                                    option(value="1" selected=(settings.productForm==1?'selected':undefined)) First enchanted form
                                    option(value="2" selected=(settings.productForm==2?'selected':undefined)) Second enchanted form (if applicable)
                            .form-group
                                label(for="overallDiamondSpreadingDwarvenCompactor") Diamond Spreading: &nbsp;
                                select#overallDiamondSpreadingDwarvenCompactor.form-control
                                    option(value="0" selected=(settings.diamondSpreading==0?'selected':undefined)) None
                                    option(value="1" selected=(settings.diamondSpreading==1||settings.diamondSpreading==3?'selected':undefined)) Diamond spreading only
                                    option(value="2" selected=(settings.diamondSpreading==2?'selected':undefined)) Diamond spreading + Dwarven compactor
                                span &nbsp; 
                                    +infoBox("diamondSpreadingDwarvenCompactorModal","question","Diamond Spreading and Dwarven Super Compactor")
                                        h4 Diamond Spreading
                                        p A minion upgrade that makes the minion generates 1 diamond every 10 items produced as a bonus, hence increasing the profit significantly for some of the minions, such as snow minions. 
                                        p You could refer to the <a href='https://hypixel-skyblock.fandom.com/wiki/Diamond_Spreading'>Skyblock wiki</a> for more information.
                                        h4 Dwarven Super Compactor
                                        p It is a super compactor 3000 and a super smelter all-in-one. It allows more minions, such as iron minion, to equip diamond spreading and increase their profits as a result.
                                        p You could refer to the <a href='https://hypixel-skyblock.fandom.com/wiki/Dwarven_Super_Compactor'>Skyblock wiki</a> for more information.

                        #autoCalculationTypeAdvanced(class=(settings.calculationType==1 ? "":"d-none"))
                            .form-group
                                input#overallDiamondSpreading.checkbox(type="checkbox" checked=(settings.diamondSpreading>=1 ? 'checked' : undefined))
                                label(for="overallDiamondSpreading") &nbsp; Has Diamond Spreading &nbsp;
                                +infoBox("diamondSpreadingModal","question","Diamond Spreading")
                                    p.
                                        A minion upgrade that makes the minion generates 1 diamond every 10 items produced as a bonus, hence increasing the profit significantly for some of the minions, such as snow minions. 
                                        You could refer to the <a href='https://hypixel-skyblock.fandom.com/wiki/Diamond_Spreading'>Skyblock wiki</a> for more information.
                            .form-group
                                label(for="overallSuperCompactor") Compactor: &nbsp;
                                select#overallSuperCompactor.form-control(onchange="toggleMinionChest()")
                                    option(value="0" selected=(settings.superCompactor==0?'selected':undefined)) None/ Compactor
                                    //-option(value="1" selected=(settings.superCompactor==1?'selected':undefined)) Compactor
                                    option(value="2" selected=(settings.superCompactor==2?'selected':undefined)) Super Compactor 3000
                                    option(value="3" selected=(settings.superCompactor==3?'selected':undefined)) Dwarven Super Compactor
                                span &nbsp; 
                                    +infoBox("superCompactorModal","question","Different Compactors")
                                        h4 Compactor
                                        p A minion upgrade for early game players which compacts items into their block form. This only works for certain minions like diamond minions and emerald minions. It increases the minion storage.
                                        p It is normal that the calculator recommends selling the items in the enchanted form rather than the base form, as the enchanted forms may sell more than the base form. You could always convert the product blocks into their respective enchanted form. Alternatively, you could also change the product blocks back into their base form and sell them to the bazaar for most of the product blocks.
                                        p You could refer to the <a href='https://hypixel-skyblock.fandom.com/wiki/Compactor'>Skyblock wiki</a> for more information.
                                        
                                        h4 Super Compactor 3000
                                        p A minion upgrade for mid to late game players which compacts items into their enchanted form. You cannot covert the enchanted items back to original items, therefore, it may affect the total profit. The calculator would take this factor into account and calculate the profit accurately.
                                        p You could refer to the <a href="https://hypixel-skyblock.fandom.com/wiki/Super_Compactor_3000">Skyblock wiki</a> for more information.

                                        h4 Dwarven Super Compactor
                                        p It is a super compactor 3000 and a super smelter all-in-one. It allows more minions, such as iron minion, to equip diamond spreading and increase their profits as a result.
                                        p You could refer to the <a href='https://hypixel-skyblock.fandom.com/wiki/Dwarven_Super_Compactor'>Skyblock wiki</a> for more information.
                            #minionChest(class=(settings.superCompactor<=1 ? "":"d-none"))
                                .form-group
                                    input#overallNoCrafting.checkbox(type="checkbox" checked=(settings.noCrafting>=1 ? 'checked' : undefined))
                                    label(for="overallNoCrafting") &nbsp; No Crafting &nbsp;
                            //-     .form-group
                            //-         label(for="overallMinionChest") Minion Chest: &nbsp;
                            //-         select#overallMinionChest.form-control
                            //-             option(value="0" selected=(settings.minionChest==0?'selected':undefined)) None
                            //-             option(value="3" selected=(settings.minionChest==3?'selected':undefined)) Small Storage
                            //-             option(value="9" selected=(settings.minionChest==9?'selected':undefined)) Medium Storage
                            //-             option(value="15" selected=(settings.minionChest==15?'selected':undefined)) Large Storage
                            //-             option(value="21" selected=(settings.minionChest==21?'selected':undefined)) X-Large Storage
                            //-             option(value="27" selected=(settings.minionChest==27?'selected':undefined)) XX-Large Storage
                            //-     .form-group
                            //-         label(for="overallAutomaticShipping") Automated Shipping: &nbsp;
                            //-         select#overallAutomaticShipping.form-control
                            //-             option(value="0" selected=(settings.automaticShipping==0?'selected':undefined)) None
                            //-             option(value="0.5" selected=(settings.automaticShipping==0.5?'selected':undefined)) Budget Hopper
                            //-             option(value="0.9" selected=(settings.automaticShipping==0.9?'selected':undefined)) Enchanted Hopper
                        
                        .form-group
                            label(for="overallSellingTo") Selling to: &nbsp;
                            select#overallSellingTo.form-control
                                option(value="1" selected=(settings.sellingTo==1?'selected':undefined)) Max profit (NPC or bazaar)
                                option(value="0" selected=(settings.sellingTo==0?'selected':undefined)) NPC only
                        .form-group
                            input#overallShowDetails.checkbox(type="checkbox" checked=(settings.showDetails>=1 ? 'checked' : undefined))
                            label(for="overallShowDetails") &nbsp; Show Info Button &nbsp;
                            +infoBox("showDetailsModal","question","Show Info")
                                p If this option is checked, an info button on the rightmost side of the minion table in the minions page, containing all the raw data about the minions. If you spot any incorrect data in the info section, please contact me <a href="/contact">here</a>. You could verify the data with Hypixel Wiki or your own experience in Skyblock.
                        #autoCalculationTypeMiscellaneous(class=(settings.calculationType==1 ? "":"d-none"))
                            .form-group
                                //-pretick use profile to be true for first time visit
                                input#overallSoulflow.checkbox(type="checkbox" checked=settings.soulflow? "checked":undefined) 
                                label(for="overallSoulflow") &nbsp; Use Lesser Soulflow Engine &nbsp; 
                                +infoBox("soulflowModal","question","Lesser Soulflow Engine")
                                    h4 Info
                                    p Copied from <a href='https://hypixel-skyblock.fandom.com/wiki/Lesser_Soulflow_Engine'>Skyblock Wiki</a>: 
                                    p The Lesser Soulflow Engine can be used as a minion upgrade. When it is added to a minion, its output will be reduced by 50%. Every 3.6 minutes (220 seconds), it will produce 1x Raw Soulflow. This production rate is unaffected by minion speed, minion Crystals nor Minion Fuel. Minions containing a Lesser Soulflow Engine will have purple particles above them.
                                    p The Lesser Soulflow Engine requires Enderman Slayer level 2 to use.
                                    h4 Technical Details
                                    p For easy implementation, when the Lesser Soulflow Engine checkbox is checked: 
                                    ul
                                        li Lesser Soulflow Engine would be added regardless of the existing minion upgrades, so profits might be overestimated slightly because diamond spreading is equipped regardless.
                                        li This feature only works for the new calculation type.
                                        li Cannot modify Soulflow through individual minion settings.
                        br
                        #miscellaneousInline
                            h3 Miscellaneous &nbsp;
                            a.read-more(data-toggle="collapse" href="#miscellaneous" aria-expanded="false" aria-controls="miscellaneous")
                                span.collapsed Show more
                                span.expanded Show less
                        #miscellaneous.collapse
                            .form-group
                                label(for="overallCalculationType") Calculation mode: &nbsp;  
                                select#overallCalculationType.form-control(onchange="toggleCalculationType()")
                                    option(value="0" selected=(settings.calculationType==0?'selected':undefined)) Old
                                    option(value="1" selected=(settings.calculationType==1?'selected':undefined)) New (based on offline duration)
                                span &nbsp; 
                                    +infoBox("calculationTypeModal","question","Calculation Modes")
                                        h4 New calculation mode
                                        p It calculates the profit based on your frequency of collecting minions. For example, lapis minions could be a good minion for active players, who collect enchanted lapis before they are automatically converted into enchanted lapis blocks, but not for those who are less active.
                                        h4 Old calculation mode
                                        p The original calculation mode - It calculates the profit based on a particular enchanted form of every product. (e.g. first enchanted form/ most profitable enchanted form) It does not calculate based on your offline duration.

                            .form-group
                                label(for="overallSellingMethod") Selling method in bazaar: &nbsp;
                                select#overallSellingMethod.form-control
                                    option(value="1" selected=(settings.sellingMethod==1?'selected':undefined)) Sell instantly
                                    option(value="0" selected=(settings.sellingMethod==0?'selected':undefined)) Sell offer
                                    
                            .form-group
                                label(for="overallTax") Tax in bazaar: &nbsp; 
                                    input#overallTax.form-control(type="number" value=settings.tax min="0")
                                    span &nbsp; %
            br
            button#overallSettings.btn(onclick="generateLink()") Apply
            br
            br

        #content
            hr
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            //- <!-- minions1 -->
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3541192882647315" data-ad-slot="6074503232" data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script>
            br
            if settings&&settings.hasError
                h1 Error
                p.lead=settings.errorMsg
                h3 Is Hypixel API down?
                p You could check to see if <a href="https://api.hypixel.net/skyblock/bazaar">this link</a> brings you to the raw bazaar data to see if Hypixel API is down.
                p If so, we could not calculate minions profit based on the latest bazaar price. However, you may try <a href="/minions/?sellingTo=0">this set of settings</a> to obtain the minions profit in NPC price instead, until the Hypixel API is fixed.
                p You may make a bug report <a href="/contact">here</a> if the above set of settings also does not work. Sorry for the inconvenience caused.
            else if !minions || !settings
                h1 Error
                p.lead An unexpected error has occured.
                h3 Is Hypixel API down?
                p You could check to see if <a href="https://api.hypixel.net/skyblock/bazaar">this link</a> brings you to the raw bazaar data to see if Hypixel API is down.
                p If so, we could not calculate minions profit based on the latest bazaar price. However, you may try <a href="/minions/?sellingTo=0">this set of settings</a> to obtain the minions profit in NPC price instead, until the Hypixel API is fixed.
                p You may make a bug report <a href="/contact">here</a> if the above set of settings also does not work. Sorry for the inconvenience caused.
            else
                #search: .form-group
                    label(for="searchInput") Search: &nbsp;
                    input#searchInput(list="searchDatalist").form-control
                    datalist#searchDatalist
                        each minion in minions
                            option(value=minion.name.substring(0,minion.name.lastIndexOf(" ")))
                    span &nbsp; &nbsp; &nbsp;
                    button#searchButton.btn(onclick="search()") Search
                #doubleScroll: table#minionsTable.table.table-dark.w-100
                    thead
                        tr
                            th(scope="col")
                            th(scope="col") 
                                if settings.calculationType==0
                                    | Minion (Profit Per Hour)
                                else
                                    if settings.offlineTimeUnit==1
                                        | Minion (Total Profit for<br /> 1 minion for #{settings.offlineTime/24} day(s))
                                    else
                                        | Minion (Total Profit for<br /> 1 minion for #{settings.offlineTime} hour(s))
                            th(scope="col") Tier
                            th(scope="col" class="tools") Minion Upgrades
                            th(scope="col") Items
                            th(scope="col") Quantity
                            th(scope="col") Unit Price (Bazaar)
                            if settings.calculationType==1
                                th(scope="col") Total Profit
                            th(scope="col") Profit Per Hour
                            th(scope="col")
                    -let i=0;
                    each minion in minions
                        tr(id="minion"+i+"Row" class=minion.hasIndividualSettings==1?"individualTableRow":null)
                            td.text-center
                                | ##{i+1}
                                br
                                img(src="/images/minions/"+minion.name+".png" width="30" height="30")
                            td(id="minion"+i+"Name")
                                | #{minion.name}
                                br
                                | (#{minion.totalProfitText})
                            td(id="minion"+i+"Tier")=minion.tier
                            td(id="minion"+i+"Tools" class=minion.toolsWarning? "warning" : null): p.tools
                                if minion.tools
                                    each tool in minion.tools
                                        | #{tool}
                                        br
                            td(id="minion"+i+"Items")
                                if minion.outputProducts
                                    each product in minion.outputProducts
                                        | #{product.name}
                                        br
                            td(id="minion"+i+"NumberOfItems")
                                if minion.outputProducts
                                    each product in minion.outputProducts
                                        | #{product.numberOfItems}
                                        br
                            td(id="minion"+i+"BazaarPrices")
                                if minion.outputProducts
                                    each product in minion.outputProducts
                                        | #{product.unitPrice}
                                        br
                            td(id="minion"+i+"TotalProfit")=minion.totalProfitText
                            if settings.calculationType==1
                                td(id="minion"+i+"ProfitPerHour")=minion.profitPerHour
                            td(id="minion"+i+"Settings")
                                button.btn.btn-blue(id="individualSettings"+i data-toggle="modal" data-target="#individualModal"+i) Settings
                                if(settings.showDetails==1)
                                    br
                                    button.mt-2.btn.btn-blue(id="individualInfo"+i data-toggle="modal" data-target="#infoModal"+i) Info
                        - i++;
                
                - i=0;
                #individualModals
                    each minion in minions
                        .modal.fade(id="individualModal"+i tabindex="-1" role="dialog" aria-labelledby="individualModalLabel"+i aria-hidden="true")
                            .modal-dialog(role="document")
                                .modal-content(id="individualSettingsForm"+minion.id)
                                    .modal-header
                                        h5.modal-title(id="#individualModalLabel"+i)=minion.name
                                        button.close(type="button" data-dismiss="modal" aria-label="Close")
                                            span(aria-hidden="true") &times;
                                    .modal-body
                                        p This function is in beta, bugs may occur.
                                        .form-group
                                            label(for=minion.id+"individualTier") Tier: &nbsp;
                                            select(id=minion.id+"individualTier").form-control
                                                -let j=1;
                                                while j<=minion.tierDelay.length
                                                    option(selected=(minion.tier==j ? 'selected':undefined))=j
                                                    -j++;
                                        .form-group
                                            label(for=minion.id+"individualFuel") Fuel/ other perks: &nbsp;
                                            input(id=minion.id+"individualFuel" type="number" value=minion.fuel min="0").form-control.individualFuel
                                            span &nbsp; %
                                        - let k=0;
                                        p Products:
                                        each product in minion.products
                                            .form-group
                                                label(for=minion.id+"individualProduct"+k) #{product.item}: &nbsp;
                                                select(id=minion.id+"individualProduct"+k).form-control
                                                    -let l=0;
                                                    each variant in product.variants
                                                        option(value=l selected=(product.selectedVariant==l? 'selected': undefined))=variant
                                                        - l++;
                                                    option(value=-1 selected=(product.selectedVariant==-1? 'selected': undefined)) No #{product.item}
                                                -k++;

                                            
                                            //-p More features coming soon, such as allowing you to change product forms or only allowing certain products to produce.
                                    .modal-footer
                                        button.btn.btn-secondary(type="button" data-dismiss="modal") Cancel
                                        button.btn.btn-warning(type="button" onclick="appendLink("+minion.id+")") Apply
                        - i++;
                - i=0;
                if(settings.showDetails==1)
                    #infoModals
                        each minion in minions
                            +infoBox("infoModal"+i,"rightInfo",minion.name)
                                span Selected tier: #{minion.tier} <br />
                                span Selected fuel: #{minion.fuel}% <br />
                                span Calculation formula: sum of all products(offline duration(in hours)*3600/time between actions(in seconds)/2 (due to offline)*generated per time*(1+fuel(in %)/100))<br />
                                br
                                h3 Products
                                each product in minion.products
                                    h4=product.item
                                    if(product.item=="Diamond (Spreading)")
                                        span Generated Per Time: Calculated by sum of items harvested * 0.1 <br />
                                    else
                                        span Generated Per Time: #{product.perTime} <br />
                                    //- XP
                                    if(product.canCompactor)
                                        span.
                                            Can be compacted <br />
                                            Product Name: #{product.compactor.variant} <br /> 
                                            Equivalent: #{product.compactor.variantEquiv} <br />
                                    br
                                    h5 Variants
                                    - let j=0
                                    table.table.table-dark
                                        thead
                                            tr
                                                th(scope="col") Name
                                                th(scope="col") Equivalent
                                                th(scope="col") NPC Price
                                        each variant in product.variants
                                            tr
                                                td=variant
                                                td=product.variantsEquiv[j]
                                                td=product.variantsNpcPrices ? product.variantsNpcPrices[j]: product.npcPrice*product.variantsEquiv[j]
                                            -j++;
                                    br
                                h3 Tiers
                                - let k=0
                                table.table.table-dark
                                    thead
                                        tr
                                            th(scope="col") Tier
                                            th(scope="col") Time between actions <br />(in seconds)
                                            th(scope="col") Storage
                                            th(scope="col") Crafting materials
                                            th(scope="col") Quantities
                                    each tier in minion.tierDelay
                                        tr
                                            td=(k+1)
                                            td=tier
                                            td=minion.storage[k]
                                            td
                                                each upgradeMaterial in minion.upgrade.materials[k]
                                                    | #{upgradeMaterial}
                                                    br
                                                if minion.upgrade.materialsAlt && minion.upgrade.materialsAlt[k]
                                                    | OR
                                                    br
                                                    each upgradeMaterial in minion.upgrade.materialsAlt[k]
                                                        | #{upgradeMaterial}
                                                        br
                                            td                                     
                                                each upgradeQuantity in minion.upgrade.quantities[k]
                                                    | #{upgradeQuantity}
                                                    br
                                                if minion.upgrade.quantitiesAlt && minion.upgrade.quantitiesAlt[k]
                                                    | OR
                                                    br
                                                    each upgradeQuantity in minion.upgrade.quantitiesAlt[k]
                                                        | #{upgradeQuantity}
                                                        br
                                        -k++;

                            - i++;
            p: small
                if(settings.lastUpdatedBazaar)
                    | Last updated time of bazaar price: #{settings.lastUpdatedBazaar} UTC
                if(settings.lastUpdatedProfile)
                    | <br />Last updated time of profile: #{settings.lastUpdatedProfile} UTC
  
//- .form-group
//-     p Fuel: &nbsp; <input id="individualFuel" type="number" value="25" class="form-control" min="0"/> %
//- .form-group
//-     input#individualDiamondSpreading.checkbox(type="checkbox" checked onchange="toggleIndividualDiamondSpreading()")
//-     label(for="individualDiamondSpreading") &nbsp; Has Diamond Spreading
//- .form-group#products
//-     label Form of products:
//-     br
//-     -let m = 0;
//-     -let n = 0;
//-     while m<10
//-         select(id="individualProduct"+m).form-control
//-             -n=0;
//-             while n<5
//-                 option(id="individualProduct"+m+"Option"+n value=n)
//-                 -n++;
//-         -m++;
//-     select(id="individualProductDiamondSpreading").form-control
//-         -n=0;
//-         while n<3
//-             option(id="individualProductDiamondSpreadingOption"+n value=n)
//-             -n++;
//- .form-group
//-     label(for="individualSellingTo") Selling to: &nbsp;
//-     select#individualSellingTo.form-control
//-         option(value="0") Max profit (NPC or bazaar)
//-         option(value="1") Bazaar only
//-         option(value="-1") NPC only
//- .form-group
//-     label(for="individualSellingMethod") Selling method in bazaar: &nbsp;
//-     select#individualSellingMethod.form-control
//-         option(value="0") Sell offer
//-         option(value="1") Sell instantly